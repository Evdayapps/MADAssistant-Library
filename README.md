# MADAssistant-Library
Mobile Android Debugging Assistant  
Common components for the client library and repository



## What is it?
MADAssistant is an attempt at building an on-device logging mechanism for Android apps, enabling easier debugging via easy accessibility to logs for all developers, QA testers, Product Owners/Managers and miscellaneous.
Paired with the companion app, it allows logging of varied information (listed later), that should help in auditing the app and debugging issues.



## So how does it work?
As said, its paired with a companion app (available soon on the playstore!), that serves as a repository for all logs generated by the client library, ensuring that those logs dont fill up and show as usage for your app!

The client library connects to the repository application via a bindService action, receives a binder and uses that binder to perform actions like the handshake, logging etc.


## "So wait, you want me to send logs to a companion app that anyone can install and view?"
Well no, not everyone can view it.  
Prior to receiving logs in the repository, the user needs to enter an authtoken (generated by the developer) that:
- Is tied to an identifier for the user's repository installation.
- Encapsulates all permissions available to the user (optional fine-grained control available via regex).
- Has an optional start timestamp and end timestamp.
- Is encrypted with a passphrase so that the user cannot modify the permissions.  

This authtoken is sent to the client library in your app, which:
- decrypts it with the passphrase you provide (should match the passphrase used to generate the token ofcourse).
- evaluates the permissions available to the user and then accordingly filters the logs sent to the repository.

To reiterate, all filtering is done in the client library (on a background thread to avoid jank), and then only sent to the client.  

BONUS (To be developed still): All logs can be encrypted with the same passphrase, to prevent the user from viewing it too. They could share the logs with you instead.

Needless to say, if no authtoken is provided, no logs are sent.

All the code for this logic is available in this repository for perusal.

(On a side note, I would welcome any additional security mechanism suggestions. The goal of this library is to be as secure as possible to avoid security missteps).


## So what can be logged?
I've tried to cover all the basics:
- Network Calls
- Analytics Events
- Exceptions and Crash reports
- General Android android.util.Log logs


### Network Logs
Properties:
- **Request** - Headers, Connection settings, Method, Timestamp, Body
- **Response** - Headers, Body, Status, Sizes, Timestamp
- **Exception** - (if any)

Filters:
- **Method** - regex string
- **Url** - regex string

### Analytics
Properties:
- **Destination** - Name of the analytics service
- **Event Name** - Name of the event
- **Parameters** - The payload for the event

Filters:
- **Destination Name** - (Regex) Name of the destination
- **Event Name** - (Regex) Name of the event
- **Parameters** - (Regex) The parameters, as a json string

### Exceptions and Crashes
Crashes can be auto logged by calling the connectExceptionHandler method
Properties:
- **Thread Name** - The name of the thread on which it occured
- **Type** - The type of the exception
- **Message** - An optional message that can be provided
- **Stacktrace** - The stack trace for the exception/crash, with causes

Filters:
- **Type** - (Regex) 
- **Message** - (Regex) 

### Generic Logs
Can be used for general logging.  
Supports all log types as per android.utils.Log

Properties:
- **Type** - The type of the log, matching android.utils.Log
- **Tag** - Tag, similar to the tag in Log.i(..), Log.d(..), etc
- **Message**- The message to log
- **Data** - An optional map of String to Any for logging any additional information required

Filters:
- **Type** - Set of options on what type of logs to allow (Debug, Info, Verbose, Warning, Error)
- **Tag** - (Regex)
- **Message** - (Regex)







